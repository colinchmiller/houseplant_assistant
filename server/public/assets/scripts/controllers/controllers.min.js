/*! 2017-01-19 */
myApp.controller("LoginController",["$scope","$http",function(a,b){console.log("LoginController is running"),a.getUser=function(){b({method:"GET",url:"/login",params:{username:a.selectedUser.username,password:a.selectedUser.password}}).then(function(a){console.log("This is the response: ",a)})}}]),myApp.controller("PlantController",["$scope","$http",function(a,b){console.log("PlantController is running"),a.plants=[],a.getPlants=function(){b({method:"GET",url:"/plants"}).then(function(b){console.log(b),a.plants=b.data})},a.getPlants()}]),myApp.controller("RoomController",["$scope","$http",function(a,b){console.log("RoomController is now running.");var c;a.getUser=function(){b({method:"GET",url:"/login"}).then(function(a){c=a.data})},a.getRoomData=function(){a.roomData=[],b({method:"GET",url:"/room",params:{username:a.username}}).then(function(b){console.log("The room response: ",b),a.roomData=b.data})},a.getUser()}]);var username;myApp.controller("WindowCriteriaController",["$scope","$http","$location","$anchorScroll",function(a,b,c,d){console.log("WindowCriteriaController is now running"),a.plantinventory=[],a.windowcost=0,a.benzene=0,a.trichloroethylene=0,a.formaldehyde=0,a.plantsForWindow=[],a.windowData=[],a.windownames=[],a.suggestedPlants=[],a.light=0,a.trulite={"background-color":"#000"},a.changeLight=function(){0==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#000"}),1==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#222"}),2==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#333"}),3==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#444"}),4==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#555"}),5==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#777"}),6==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#999"}),7==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#aaa"}),8==a.light&&(a.trulite={"background-color":"#ccc"}),9==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#eee"}),10==a.light&&(a.trulite={transition:"background-color 0.5s ease","background-color":"#fff"})},a.plantcheck=[{name:"Bamboo Palm",value:!1},{name:"Chinese Evergreen",value:!1},{name:"English Ivy",value:!1},{name:"Gerbera Daisy",value:!1},{name:"Janet Craig",value:!1},{name:"Marginata",value:!1},{name:"Mass Cane",value:!1},{name:"Snake Plant",value:!1},{name:"Peace Lily",value:!1},{name:"Pot Mum",value:!1}],a.scrollTo=function(a){c.hash(a),$anchorscroll()},a.plantCheck=function(){console.log("What is the plantinventory coming in? ",a.plantinventory);for(var b=0;b<a.plantinventory.length;b++)for(var c=a.plantinventory[b],d=0;d<a.plantcheck.length;d++){var e=a.plantcheck[d];c==e.name&&(e.value=!0)}console.log("This is the plantcheck array: ",a.plantcheck)},a.plantPrep=function(){a.plantinventory=[],console.log("This is the plantcheck data: ",a.plantcheck);for(var b=0;b<a.plantcheck.length;b++)a.plantcheck[b].value===!0&&a.plantinventory.push(a.plantcheck[b].name);console.log("The plantinventory to be uploaded: ",a.plantinventory)},a.getUser=function(){b({method:"GET",url:"/login"}).then(function(b){username=b.data,a.getWindows()})},a.getWindows=function(){b({method:"GET",url:"/windownames",params:{username:username}}).then(function(b){a.windownames=b.data})},a.getWindowData=function(){a.windowData=[];var c=a.selectedWindow.name;b({method:"GET",url:"/windows",params:{windowName:c}}).then(function(b){a.windowData=b.data,e(b.data[0].id)})};var e=function(c){a.windowTotals=[],a.plantinventory=[],a.windowcost=0,a.benzene=0,a.trichloroethylene=0,a.formaldehyde=0,b({method:"GET",url:"/windowplants",params:{windowId:c}}).then(function(b){console.log("This is the plant response: ",b),a.plantsForWindow=b.data;for(var c=0;c<a.plantsForWindow.length;c++)a.plantinventory.push(a.plantsForWindow[c].name),a.windowcost+=a.plantsForWindow[c].cost,a.benzene+=a.plantsForWindow[c].benzene,a.trichloroethylene+=a.plantsForWindow[c].trichloroethylene,a.formaldehyde+=a.plantsForWindow[c].formaldehyde;a.plantCheck()})};a.saveWindow=function(){console.log("This is the windowdata to be sent: ",a.windowData),b({method:"POST",url:"/windows",data:{windowdata:a.windowData}}).then(function(a){console.log("This is the post response: ",a),g(a.data.rows[0].id),f(a.data.rows[0].id)})};var f=function(a){b({method:"POST",url:"/windownames",data:{windowId:a,username:username}}).then(function(a){})},g=function(c){a.plantPrep();var d=a.plantinventory;console.log("This is the plant data variable: ",d);for(var e=0;e<d.length;e++)b({method:"POST",url:"/windowplants",data:{windowId:c,plantdata:d[e]}}).then(function(a){})};a.suggestPlant=function(){b({method:"GET",url:"/plants"}).then(function(b){console.log("Here is the plant data: ",b),console.log("Here is the window data: ",a.windowData),a.plants=b.data,a.suggestionLogic()})},a.suggestionLogic=function(){console.log("Suggestion logic fired"),a.suggestedPlants=[];for(var b=0;b<a.plants.length;b++){var c=a.windowData[0],d=a.plants[b],e=!1,f=!1,g=!1,h=!1,i=!1;a.windowLight=0,console.log("The plant being compared: ",d.name),e=1==c.cats&&1==d.cats?!1:!0,f=1==c.dogs&&1==d.dogs?!1:!0,g=1==c.kids&&1==d.kids?!1:!0,console.log("The pet and kid comparisons turnout: ",e,f,g),h=d.care_lvl<=c.care_lvl?!0:!1,console.log("The care level comparison: ",h),console.log("This is the window.compass: ",c.compass),"North"==c.compass?i=d.light_lvl_min<=3?!0:!1:"West"==c.compass||"East"==c.compass?i=d.light_lvl_min<4?!0:!1:"South"==c.compass&&(i=d.light_lvl_min>=1?!0:!1),console.log("After the compass comparison: ",i),1==e&&1==f&&1==g&&1==h&&1==i&&a.suggestedPlants.push({name:d.name})}console.log("This is the suggested plant list: ",a.suggestedPlants)},a.getUser()}]);